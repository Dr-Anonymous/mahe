<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Page designer| myfiles.ga</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/2.27.5/css/uikit.min.css" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/2.27.5/js/uikit.min.js"></script>

        <!-- Codemirror and marked dependencies -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.40.0/codemirror.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.40.0/codemirror.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.40.0/mode/markdown/markdown.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.40.0/addon/mode/overlay.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.40.0/mode/xml/xml.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.40.0/mode/gfm/gfm.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.5.0/marked.js"></script>

        <!-- HTML editor CSS and JavaScript -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/2.27.5/css/components/htmleditor.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/2.27.5/js/components/htmleditor.js"></script>
    </head>
    <body>
    <textarea id= "code" data-uk-htmleditor="{enablescripts:true}"></textarea>
        <center><button id= "btn" onclick="saveCode();">Save this code</button></center>
        
    <script>
var url1 = "https://script.google.com/macros/s/AKfycbympDG5nl25pZhm-UuOpxKgDG3_u37cUJMWNNj1BOxkRDEm1PY/exec?callback=loadNew&code=new";
// Make an AJAX call to get previously saved code
var request = jQuery.ajax({
      crossDomain: true,
      url: url1,
      method: "GET",
      dataType: "jsonp"
    });
  
 // load the saved code into text area
  function loadNew(e) {
  try {
	   $('textarea#code').val(e);
	}catch(err) {
	  $('textarea#code').val(err);
	}
    }
    function saveCode(){
        var code = encodeURIComponent($('textarea#code').val());
        if (code=='') return;
	  $("#btn").html("Saving code....");
	var url = "https://script.google.com/macros/s/AKfycbympDG5nl25pZhm-UuOpxKgDG3_u37cUJMWNNj1BOxkRDEm1PY/exec?callback=loadData&code="+code ;
// Make an AJAX call to Google Script
var request = jQuery.ajax({
      crossDomain: true,
      url: url,
      method: "GET",
      dataType: "jsonp"
    });
  }
 
 // print the returned data from jsonp
  function loadData(e) {
  try {
	   $("#btn").html("Saved.");
	}catch(err) {
        $("#btn").html(err);
	}
    }
    </script>
    </body>
</html>
